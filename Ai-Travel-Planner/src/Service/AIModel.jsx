import { GoogleGenerativeAI } from "@google/generative-ai";

const apiKey = import.meta.env.VITE_GOOGLE_GEMINI_AI_API_KEY;
const genAI = new GoogleGenerativeAI(apiKey);

const model = genAI.getGenerativeModel({
  model: "gemini-1.5-flash",
});

const generationConfig = {
  temperature: 1,
  topP: 0.95,
  topK: 40,
  maxOutputTokens: 8192,
  responseMimeType: "application/json",
};

export const chatSession = model.startChat({
  generationConfig,
  history: [
    {
      role: "user",
      parts: [
        {
          text: "Generate Travel Plan for Location : {destination}, for {travelDate} Date for {travelDays} Days for {selectedTravel} with a {selectedBudget} budget, give me Hotels options list with HotelName, Hotel address, Price, hotel image url, geo coordinates, rating, descriptions and suggest itinerary with placeName, Place Details, Place Image Url, Geo Coordinates, ticket Pricing, Time travel each of the location for {travelDays} days with each day plan with best time to visite in JSON format.",
        },
      ],
    },
    {
      role: "model",
      parts: [
        {
          text: 'Okay, I\'m ready to generate a JSON-formatted travel plan. To give you the most accurate and helpful result, I need you to fill in the following details:\n\n*   **destination:** (e.g., Paris, Tokyo, New York City, Rome)\n*   **travelDate:** (e.g., 2024-03-15)\n*   **travelDays:** (e.g., 3, 5, 7)\n*   **selectedTravel:** (e.g., Family, Solo, Couple, Business)\n*   **selectedBudget:** (e.g., Budget, Moderate, Luxury)\n\nOnce you provide this information, I\'ll create a JSON object containing hotel options and a detailed itinerary.\n\n**Example Input:**\n\n```\n{\n  "destination": "Paris",\n  "travelDate": "2024-03-15",\n  "travelDays": 3,\n  "selectedTravel": "Couple",\n  "selectedBudget": "Moderate"\n}\n```\n\n**Please provide the details so I can create your personalized travel plan.**\n\n**Example JSON Output Structure (This is just an example, the actual content will vary based on your input):**\n\n```json\n{\n  "destination": "Paris",\n  "travelDate": "2024-03-15",\n  "travelDays": 3,\n  "selectedTravel": "Couple",\n  "selectedBudget": "Moderate",\n  "hotels": [\n    {\n      "hotelName": "Hotel Fabric",\n      "hotelAddress": "31 Rue de la Folie Méricourt, 75011 Paris, France",\n      "price": 180,\n      "hotelImageUrl": "https://example.com/hotel_fabric.jpg",\n      "geoCoordinates": {\n        "latitude": 48.8643,\n        "longitude": 2.3698\n      },\n      "rating": 4.5,\n      "description": "Stylish hotel in the Marais district, known for its comfortable rooms and excellent service."\n    },\n    {\n      "hotelName": "Hotel Saint-André des Arts",\n      "hotelAddress": "62 Rue Saint-André des Arts, 75006 Paris, France",\n      "price": 250,\n      "hotelImageUrl": "https://example.com/hotel_saint_andre.jpg",\n      "geoCoordinates": {\n        "latitude": 48.8534,\n        "longitude": 2.3388\n      },\n      "rating": 4.2,\n      "description": "Charming hotel in the heart of Saint-Germain-des-Prés."\n    }\n  ],\n  "itinerary": {\n    "day1": {\n      "theme": "Iconic Landmarks",\n      "plan": [\n        {\n          "placeName": "Eiffel Tower",\n          "placeDetails": "Iconic wrought-iron lattice tower on the Champ de Mars in Paris.",\n          "placeImageUrl": "https://example.com/eiffel_tower.jpg",\n          "geoCoordinates": {\n            "latitude": 48.8584,\n            "longitude": 2.2945\n          },\n          "ticketPricing": 26,\n          "bestTimeToVisit": "Morning (9:00 AM - 11:00 AM) to avoid long queues",\n          "timeTravel": "30 minutes from Hotel Fabric via Metro Line 9"\n        },\n        {\n          "placeName": "Louvre Museum",\n          "placeDetails": "World\'s largest art museum and a historic monument.",\n          "placeImageUrl": "https://example.com/louvre.jpg",\n          "geoCoordinates": {\n            "latitude": 48.8606,\n            "longitude": 2.3376\n          },\n          "ticketPricing": 17,\n          "bestTimeToVisit": "Afternoon (2:00 PM - 4:00 PM) or Wednesday/Friday evenings for fewer crowds",\n          "timeTravel": "20 minutes from Eiffel Tower via Metro Line 6 and 1"\n        }\n      ]\n    },\n    "day2": {\n      "theme": "Culture and Charm",\n      "plan": [\n        {\n          "placeName": "Montmartre",\n          "placeDetails": "Hilltop neighborhood known for the Sacré-Cœur Basilica and artistic history.",\n          "placeImageUrl": "https://example.com/montmartre.jpg",\n          "geoCoordinates": {\n            "latitude": 48.8864,\n            "longitude": 2.3430\n          },\n          "ticketPricing": 0,\n          "bestTimeToVisit": "Morning (10:00 AM - 12:00 PM) to explore the Place du Tertre",\n          "timeTravel": "40 minutes from Louvre Museum via Metro Line 1 and 12"\n        },\n        {\n          "placeName": "Sacre-Coeur Basilica",\n          "placeDetails": "Roman Catholic church and minor basilica, dedicated to the Sacred Heart of Jesus, in Paris, France.",\n          "placeImageUrl": "https://example.com/sacrecouer.jpg",\n          "geoCoordinates": {\n            "latitude": 48.8867,\n            "longitude": 2.3431\n          },\n          "ticketPricing": 0,\n          "bestTimeToVisit": "Morning (10:00 AM - 12:00 PM) to avoid long queues",\n          "timeTravel": "Walkable from Montmartre"\n        }\n      ]\n    },\n    "day3": {\n      "theme": "Gardens and History",\n      "plan": [\n        {\n          "placeName": "Luxembourg Gardens",\n          "placeDetails": "Beautiful gardens with fountains, sculptures, and activities.",\n          "placeImageUrl": "https://example.com/luxembourg_gardens.jpg",\n          "geoCoordinates": {\n            "latitude": 48.8467,\n            "longitude": 2.3381\n          },\n          "ticketPricing": 0,\n          "bestTimeToVisit": "Afternoon (2:00 PM - 4:00 PM) for a relaxing stroll",\n          "timeTravel": "30 minutes from Montmartre via Metro Line 12 and RER B"\n        },\n        {\n          "placeName": "Notre-Dame Cathedral",\n          "placeDetails": "Historic cathedral, currently under restoration.",\n          "placeImageUrl": "https://example.com/notre_dame.jpg",\n          "geoCoordinates": {\n            "latitude": 48.8530,\n            "longitude": 2.3499\n          },\n          "ticketPricing": 0,\n          "bestTimeToVisit": "Exterior view only, due to restoration.  Visit the surrounding area.",\n          "timeTravel": "20 minutes from Luxembourg Gardens via RER B"\n        }\n      ]\n    }\n  }\n}\n```\n\n**Important Notes:**\n\n*   **Image URLs:** The image URLs are placeholders (`https://example.com/...`).  In a real application, you would use actual image URLs.  I don\'t have access to a real-time image database.\n*   **Pricing:** Ticket prices are estimates and can vary.  Always check the official websites for the most up-to-date pricing.\n*   **Travel Times:** Travel times are estimates based on public transportation. Traffic and other factors can affect actual travel times.  Use a mapping app like Google Maps for real-time directions.\n*   **Hotel Availability:** Hotel availability and pricing can change rapidly.  Always check availability and book in advance.\n*   **Restaurant Recommendations:**  This example focuses on hotels and attractions.  I can add restaurant recommendations if you\'d like, but I\'ll need more information about your preferences (cuisine, price range, etc.).\n*   **API Integration:** In a real-world application, you would use APIs (like Google Places API, hotel booking APIs, etc.) to dynamically retrieve data.  I am a language model, so I can\'t directly access external APIs.\n\nI\'m ready to generate your customized travel plan when you provide the input.\n',
        },
      ],
    },
  ],
});
